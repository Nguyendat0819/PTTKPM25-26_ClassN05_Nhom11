<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Giỏ hàng</title>
     <link rel="stylesheet" th:href="@{/css/home.css}">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
</head>
<body class="bg-light">
    <header class="header">
        <!-- Logo -->
        <div class="logo-shop">
            <a th:href="@{/user/home}">
                <img th:src="@{/images/logo-header.png}" alt="Diang Drink Logo" title="Trở về trang chủ">
            </a>
        </div>
    </header>
<div class="container py-5">
  <h2 class="text-center mb-4 text-success fw-bold">Giỏ hàng của bạn</h2>

  <!-- Nếu có đơn hàng -->
  <div th:if="${order != null}">
    <form th:action="@{/user/checkout}" method="post" style="height: 305px;">
      <div class="card shadow-sm">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered align-middle">
              <thead class="table-success text-center">
                <tr>
                  <th scope="col">Chọn</th>
                  <th scope="col">Sản phẩm</th>
                  <th scope="col">Giá</th>
                  <th scope="col">Số lượng</th>
                  <th scope="col">Hành động</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="detail : ${order.orderDetails}">
                  <td class="text-center">
                    <input class="form-check-input" type="checkbox" name="selectedIds"
                           th:value="${detail.orderDetailId}">
                  </td>
                  <td th:text="${detail.productName}"></td>
                  <td th:text="${#numbers.formatDecimal(detail.productPrice * 1000, 0, 'POINT', 0, 'COMMA')} + ' ₫'"></td>
                  <td class="text-center" th:text="${detail.quantity}"></td>
                  <td class="text-center">
                    <div class="btn-group">
                      <!-- nút giảm -->
                      <form th:action="@{/user/cart/decrease}" method="post" style="display:inline;">
                        <input type="hidden" name="detailId" th:value="${detail.orderDetailId}">
                        <button type="submit" class="btn btn-outline-danger btn-sm" style="margin-right: 5px;">-</button>
                      </form>

                      <!-- nút tăng -->
                      <form th:action="@{/user/cart/increase}" method="post" style="display:inline;">
                        <input type="hidden" name="detailId" th:value="${detail.orderDetailId}">
                        <button type="submit" class="btn btn-outline-success btn-sm">+</button>
                      </form>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="d-flex justify-content-end mt-3">
            <button type="submit" class="btn btn-success px-4">
              <i class="bi bi-cash-stack me-2"></i>Thanh toán
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>



  <!-- Nếu không có đơn hàng -->
  <div th:if="${order == null}" class="text-center mt-5">
    <div class="alert alert-warning d-inline-block shadow-sm px-4 py-3">
      <p class="mb-0">Chưa có sản phẩm nào trong giỏ hàng!!!</p>
    </div>
  </div>
</div>


<!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="logo-footer">
        <a th:href="@{ #}">
          <img th:src="@{/images/logo-header.png}" alt="logo-footer" title="Diang Drink">
        </a>
      </div>
      <div class="about-diang">
        <h3 style="color: #333;">Về Diang Drink</h3>
        <p>Diang Drink cam kết mang đến cho bạn những trải nghiệm đồ uống tuyệt vời nhất với nguyên liệu tươi ngon và công thức độc đáo.</p>
        <a href="#">Nguồn gốc</a>
        <a href="#">Dịch vụ</a>
        <a href="#">Tuyển dụng</a>
        <a href="#">Liên hệ</a>
      </div>
      <div class="customer-support">
        <h3 style="color: #333;">Hỗ trợ khách hàng</h3>
        <a href="#">Chính sách đổi trả</a>
        <a href="#">Chính sách bảo mật</a>
        <a href="#">Điều khoản dịch vụ</a>
        <a href="#">Câu hỏi thường gặp</a>
      </div>
      <div class="system-store">
        <h3 style="color: #333;">Hệ thống cửa hàng</h3>
        <p>Hà Nội: 123 Đường A, Quận B</p>
        <p>Hồ Chí Minh: 456 Đường C, Quận D</p>
        <p>Đà Nẵng: 789 Đường E, Quận F</p>
        <p>Liên hệ: 0909 999 999</p>
      </div>
      <div class="follow-us">
        <h3>Theo dõi chúng tôi:</h3>
        <a href="#" class="social-media-icons"><img th:src="@{/images/tiktok.png}" alt="tiktok-icon" title="TikTok"></a>
        <a href="#" class="social-media-icons"><img th:src="@{/images/instagram.png}" alt="instagram-icon" title="Instagram"></a>
        <a href="#"class="social-media-icons"><img th:src="@{/images/facebook.png}" alt="facebook-icon" title="Facebook"></a>
        <a href="#"class="social-media-icons"><img th:src="@{/images/youtube.png}" alt="youtube-icon" title="YouTube"></a>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


</body>
</html>
